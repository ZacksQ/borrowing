(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{140:function(_,e){},180:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"default",function(){return BindCard});var babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4),babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__),babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),normalize_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(30),normalize_css__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(normalize_css__WEBPACK_IMPORTED_MODULE_6__),_bindcard_scss__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(140),_bindcard_scss__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_bindcard_scss__WEBPACK_IMPORTED_MODULE_7__),_comps_index__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1),_helper_helper__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2),qs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(16),qs__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_10__);!function(){var _=__webpack_require__(3).enterModule;_&&_(module)}();var BindCard=function(_Component){function BindCard(_){babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,BindCard);var e=babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this,(BindCard.__proto__||Object.getPrototypeOf(BindCard)).call(this,_));return e.state={banklist:[],startcountdow:!1,cardata:{user_name:"",card_no:"",card_type:"",user_phone:"",user_idcard:"",card_name:""},sucesscountdown:!1,btnstatus:!0,showloading:!1},e.platform_id=_.match.params.platform_id,e.http=_helper_helper__WEBPACK_IMPORTED_MODULE_9__.c.get("LoansDispatch/getBankCardInfo?platform_id="+e.platform_id),e}return babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(BindCard,_Component),babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(BindCard,[{key:"componentDidMount",value:function(){var _=this;Object(_helper_helper__WEBPACK_IMPORTED_MODULE_9__.g)("绑定银行卡"),this.http.then(function(e){if(0==e.data.code){var a=e.data.data;a.user_card_info.user_idcard=a.user_card_info.id_card,_.setState({banklist:a.bank_list,cardata:a.user_card_info})}})}},{key:"render",value:function(){var _=this,e=this.state.cardata,a=e.user_name,t=e.card_no,r=e.card_type,E=e.user_phone,n=e.user_idcard;return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"fullcard"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.i,{style:{backgroundColor:"white"},className:"picker-list"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.h,{label:"真实姓名",value:a,onChange:function(e){_.setState({cardata:babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},_.state.cardata,{user_name:e})})}}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.h,{label:"身份证号",maxLength:"18",value:n,onChange:function(e){_.setState({cardata:babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},_.state.cardata,{user_idcard:e})})}}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.h,{label:"手机号",maxLength:"11",value:E,onChange:function(e){_.setState({cardata:babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},_.state.cardata,{user_phone:e})})}}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.m,{data:this.state.banklist,title:"银行名称",value:""!=this.state.cardata.card_type?[this.state.cardata.card_type]:[r],onOk:function(e){_.setState({cardata:babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},_.state.cardata,{card_type:e[0]})})},cols:1}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.h,{label:"银行卡",placeholder:"请输入银行卡",maxLength:"19",value:t,onChange:function(e){_.setState({cardata:babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},_.state.cardata,{card_no:e})})}})),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"tip"},"请核对相关信息，否则将导致贷款失败。"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"wrap"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.b,{txt:"确认无误",className:0==this.state.btnstatus?"loading":"",onClick:function(){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_9__.h)("绑定银行卡确认无误按钮被点击","loan-bindcardv1");var e=_.state.cardata;return""==e.user_name?(_comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail("真实姓名不能为空"),!1):""==e.user_idcard?(_comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail("身份证号不能为空"),!1):""==e.card_no?(_comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail("银行卡不能为空"),!1):""==e.user_phone?(_comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail("手机号不能为空"),!1):""==e.card_type?(_comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail("银行未选择"),!1):(e.platform_id=_.platform_id,_.state.banklist.forEach(function(_){_.value==e.card_type&&(e.card_name=_.label)}),_.setState({btnstatus:!1}),void _helper_helper__WEBPACK_IMPORTED_MODULE_9__.c.post("LoansDispatch/sendVerifyCode",qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(e)).then(function(e){0==e.data.code?(_.cd.showMessageBox(),_.setState({startcountdow:!0})):_comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail(e.data.message),_.setState({btnstatus:!0})}))}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("span",{style:0==this.state.btnstatus?{display:"flex"}:{display:"none"}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.f,{type:"loading"})))),1==this.state.showloading?react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.j,{istransparent:!0}):null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.l,{ref:function(e){return _.cd=e}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"sendcode bindstatus"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("h4",null,"请输入验证码"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"dialog-content "},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("input",{type:"tel",ref:"code",maxLength:"6"}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"countdown"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.e,{value:"60",ref:"countdown",type:"sendcode",resend:function(){if(Object(_helper_helper__WEBPACK_IMPORTED_MODULE_9__.h)("确认验证码弹框重新发送按钮被点击","loan-bindcardv1"),console.log(_.refs.countdown.getvalue()),0==_.refs.countdown.getvalue()){_.setState({showloading:!0});var e=_.state.cardata;e.platform_id=_.platform_id,_.state.banklist.forEach(function(_){_.value==e.card_type&&(e.card_name=_.label)}),_helper_helper__WEBPACK_IMPORTED_MODULE_9__.c.post("LoansDispatch/sendVerifyCode",qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(e)).then(function(e){_.setState({showloading:!1}),0==e.data.code?_.refs.countdown.startimer():_comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail(e.data.message)})}},start:this.state.startcountdow,unit:"s"}))),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.b,{className:"btn-reserve",txt:"取消",onClick:function(){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_9__.h)("确认验证码弹框取消按钮被点击","loan-bindcardv1"),_.refs.code.value="",_.cd.closeMessageBox()}}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.b,{txt:"确认",onClick:function(){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_9__.h)("确认验证码弹框确认按钮被点击","loan-bindcardv1");var e=_.state.cardata;if(e.code=_.refs.code.value,e.platform_id=_.platform_id,""==e.code)return _comps_index__WEBPACK_IMPORTED_MODULE_8__.a.fail("验证码不能为空"),!1;_helper_helper__WEBPACK_IMPORTED_MODULE_9__.c.post("LoansDispatch/verifyCode",qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(e)).then(function(e){0==e.data.code?(_.cd.closeMessageBox(),_.sd.showMessageBox(),_.setState({sucesscountdown:!0})):(_.cd.closeMessageBox(),_.fd.showMessageBox()),_.refs.code.value=""})}})))),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.l,{ref:function(e){return _.sd=e}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"bindstatus"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("h4",null,"绑卡成功"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"dialog-content "},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.f,{type:"bkcg success-icon"}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"tip"},"绑卡成功（ ",react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.e,{value:"3",start:this.state.sucesscountdown,unit:"s",handleCountDown:function(){_.props.history.push("../binddata/"+_.platform_id)}})," ）")))),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.l,{ref:function(e){return _.fd=e}},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"bindstatus"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"dialog-content "},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_8__.f,{type:"fail success-icon"}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"status"},"认证失败")))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),BindCard}(react__WEBPACK_IMPORTED_MODULE_5__.Component);!function(){var _=__webpack_require__(3).default,e=__webpack_require__(3).leaveModule;_&&(_.register(BindCard,"BindCard","E:/Project/long/src/views/bindcard/bindcard.js"),e(module))}()}.call(this,__webpack_require__(10)(module))},30:function(_,e){}}]);