(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{189:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"default",function(){return WorkFlowStep4});var babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__),babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),_comps_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),_helper_helper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2),qs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),qs__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_7__),_workflow_scss__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(31),_workflow_scss__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_workflow_scss__WEBPACK_IMPORTED_MODULE_8__);!function(){var e=__webpack_require__(3).enterModule;e&&e(module)}();var getdata=_helper_helper__WEBPACK_IMPORTED_MODULE_6__.c.get("LoansDispatch/saveConnect"),marriage=[{value:"21",label:"初婚"},{value:"10",label:"未婚"},{value:"22",label:"再婚"},{value:"30",label:"丧偶"},{value:"40",label:"离异"},{value:"90",label:"其他（事实婚姻）"}],relationship1=[{value:"01",label:"父母"},{value:"02",label:"子女及兄弟姐妹"},{value:"03",label:"亲属"}],relationship2=[{value:"04",label:"同事"},{value:"05",label:"朋友"},{value:"06",label:"同学"},{value:"99",label:"其他"}],WorkFlowStep4=function(_Component){function WorkFlowStep4(){babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,WorkFlowStep4);var e=babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this,(WorkFlowStep4.__proto__||Object.getPrototypeOf(WorkFlowStep4)).call(this));return e.state={marriage:["21"],matename:"",matetel:"",relationship1:["01"],contactname1:"",contacttel1:"",relationship2:["04"],contactname2:"",contacttel2:"",agreementstatue:!1,agreementdialogstatue:!1,iscert:!1,iscountdown:!1,operator_url:"",protocolname:"",protocolcontent:""},e.getplatformid=_helper_helper__WEBPACK_IMPORTED_MODULE_6__.c.get("LoansPlatform/moduleConfig").then(function(e){if(0==e.data.code){var _=e.data.data;localStorage.setItem("platform_id",_.platform_id)}}),e}return babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(WorkFlowStep4,_Component),babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(WorkFlowStep4,[{key:"componentDidMount",value:function(){var e=this;Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.g)("运营商认证"),getdata.then(function(_){0==_.data.code&&(1==_.data.data.is_operator_verift&&(null==localStorage.getItem("shown")&&(localStorage.setItem("shown",!0),e.refs.certstatus.showMessageBox()),e.setState({iscert:!0})),e.setState({operator_url:_.data.data.operator_url}))}),this.setState({marriage:localStorage.getItem("marriage")?[localStorage.getItem("marriage")]:[],matename:localStorage.getItem("matename")?localStorage.getItem("matename"):"",matetel:localStorage.getItem("matetel")?localStorage.getItem("matetel"):"",relationship1:localStorage.getItem("relationship1")?[localStorage.getItem("relationship1")]:[],contactname1:localStorage.getItem("contactname1")?localStorage.getItem("contactname1"):"",contacttel1:localStorage.getItem("contacttel1")?localStorage.getItem("contacttel1"):"",relationship2:localStorage.getItem("relationship2")?[localStorage.getItem("relationship2")]:[],contactname2:localStorage.getItem("contactname2")?localStorage.getItem("contactname2"):"",contacttel2:localStorage.getItem("contacttel2")?localStorage.getItem("contacttel2"):""}),_helper_helper__WEBPACK_IMPORTED_MODULE_6__.c.get("LoansDispatch/getPlatformProtocol/").then(function(_){0==_.data.code&&e.setState({protocolname:_.data.data.p_name,protocolcontent:_.data.data.p_content})})}},{key:"saveStorge",value:function(){localStorage.setItem("marriage",this.state.marriage[0]),localStorage.setItem("matename",this.state.matename),localStorage.setItem("matetel",this.state.matetel),localStorage.setItem("relationship1",this.state.relationship1[0]),localStorage.setItem("contactname1",this.state.contactname1),localStorage.setItem("contacttel1",this.state.contacttel1),localStorage.setItem("relationship2",this.state.relationship2[0]),localStorage.setItem("contactname2",this.state.contactname2),localStorage.setItem("contacttel2",this.state.contacttel2)}},{key:"facelive",value:function(){var e=this;Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.e)(function(_){1==_.data.code&&(e.refs.submitstatus.showMessageBox(),e.setState({iscountdown:!0}))})}},{key:"render",value:function(){var e=this;return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"workflow step3"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.n,{step:4}),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.i,{style:{backgroundColor:"white"},className:"picker-list"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.m,{data:marriage,title:"婚姻状况",cols:1,value:this.state.marriage,onOk:function(_){e.setState({marriage:_})}}),"10"!=this.state.marriage[0]&&"30"!=this.state.marriage[0]&&"40"!=this.state.marriage[0]?react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{ref:"mate"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.h,{ref:"matevalue",label:"配偶",onChange:function(e){console.log(e)},dou:!0,first:{placeholder:"姓名",type:"text",maxLength:"15",onChange:function(_){e.setState({matename:_.target.value})}},second:{placeholder:"联系电话",type:"tel",maxLength:"11",onChange:function(_){e.setState({matetel:_.target.value})}},icon:"txl",value:this.state.matename+"-"+this.state.matetel,iconClick:function(){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.i)(function(_){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.h)("配偶通讯录按钮被点击","loan-wf4v1"),"1"==_.result&&e.setState({matename:_.data.name,matetel:_.data.phone})})}})):null),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.i,{style:{backgroundColor:"white"},className:"picker-list"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.m,{data:relationship1,title:"联系人关系1",value:this.state.relationship1,onOk:function(_){return e.setState({relationship1:_})},cols:1}),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.h,{ref:"con1",label:"联系方式",onChange:function(e){console.log(e)},dou:!0,first:{placeholder:"姓名",type:"text",maxLength:"15",value:this.state.contactname1,onChange:function(_){e.setState({contactname1:_.target.value})}},second:{placeholder:"联系电话",type:"tel",maxLength:"11",value:this.state.contacttel1,onChange:function(_){e.setState({contacttel1:_.target.value})}},icon:"txl",value:this.state.contactname1+"-"+this.state.contacttel1,iconClick:function(){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.i)(function(_){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.h)("联系人关系1通讯录按钮被点击","loan-wf4v1"),"1"==_.result&&e.setState({contactname1:_.data.name,contacttel1:_.data.phone})})}})),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.i,{style:{backgroundColor:"white"},className:"picker-list"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.m,{data:relationship2,title:"联系人关系2",value:this.state.relationship2,onOk:function(_){return e.setState({relationship2:_})},cols:1}),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.h,{ref:"con2",label:"联系方式",onChange:function(e){console.log(e)},dou:!0,first:{placeholder:"姓名",type:"text",maxLength:"15",value:this.state.contactname2,onChange:function(_){e.setState({contactname2:_.target.value})}},second:{placeholder:"联系电话",type:"tel",maxLength:"11",value:this.state.contacttel2,onChange:function(_){e.setState({contacttel2:_.target.value})}},icon:"txl",value:this.state.contactname2+"-"+this.state.contacttel2,iconClick:function(){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.i)(function(_){Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.h)("联系人关系2通讯录按钮被点击","loan-wf4v1"),"1"==_.result&&e.setState({contactname2:_.data.name,contacttel2:_.data.phone})})}})),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.g,{label:"运营商",type:0==this.state.iscert?2:1,onClick:function(){e.saveStorge(),window.location.href=e.state.operator_url}}),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"agreement"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"check-wrap",onClick:function(){e.setState({agreementstatue:!e.state.agreementstatue})}},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.f,{type:this.state.agreementstatue?"cheacked":"cheack"})),"我已阅读并同意 ",react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("span",{className:"txt-primary",onClick:function(){e.ag.showMessageBox()}},"《",this.state.protocolname,"》")),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"wrap"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.b,{txt:"真人提交",onClick:function(){if(Object(_helper_helper__WEBPACK_IMPORTED_MODULE_6__.h)("真人提交按钮被点击","loan-wf4v1"),1==e.state.agreementstatue){var _={marital_status:e.state.marriage[0],is_operator_verift:e.state.iscert,first_relation:e.state.relationship1[0],first_name:e.state.contactname1,first_mobile:e.state.contacttel1,second_relation:e.state.relationship2[0],second_name:e.state.contactname2,second_mobile:e.state.contacttel2};if(void 0==_.marital_status)return _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("婚姻状况未选择"),!1;if(void 0==_.first_relation)return _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("联系人关系1未选择"),!1;if(void 0==_.second_relation)return _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("联系人关系2未选择"),!1;if("10"!=_.marital_status&&"30"!=_.marital_status&&"40"!=_.marital_status){if(""==_.marital_name||""==_.marital_telephone)return _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("配偶信息不能为空"),!1;_.marital_name=e.state.matename,_.marital_telephone=e.state.matetel}if(""==_.first_name||""==_.first_mobile)return _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("联系人关系1不能为空"),!1;if(""==_.second_name||""==_.second_mobile)return _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("联系人关系2不能为空"),!1;if(e.saveStorge(),0==e.state.iscert)return _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("运营商未认证"),!1;_helper_helper__WEBPACK_IMPORTED_MODULE_6__.c.post("LoansDispatch/saveConnect",qs__WEBPACK_IMPORTED_MODULE_7___default.a.stringify(_)).then(function(_){0==_.data.code?e.facelive():_comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail(_.data.message)})}else _comps_index__WEBPACK_IMPORTED_MODULE_5__.a.fail("协议未同意")}})),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.l,{ref:"submitstatus",className:"tipdialog"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"bindstatus"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"dialog-content "},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.f,{type:"success"})),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"status"},"恭喜您，申请已受理"),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"tip"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.e,{value:3,unit:"秒",start:this.state.iscountdown,handleCountDown:function(){e.props.history.push("./application")}})),"秒后跳转受信页面"))),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.l,{ref:"certstatus",className:"tipdialog"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"bindstatus"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"dialog-content "},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.f,{type:"success"})),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"status"},"认证成功"))),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_comps_index__WEBPACK_IMPORTED_MODULE_5__.l,{ref:function(_){return e.ag=_}},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"confirm agreement"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("h4",null,this.state.protocolname),react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div",{className:"content"},react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("pre",null,this.state.protocolcontent)))))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),WorkFlowStep4}(react__WEBPACK_IMPORTED_MODULE_4__.Component);!function(){var e=__webpack_require__(3).default,_=__webpack_require__(3).leaveModule;e&&(e.register(getdata,"getdata","E:/Project/long/src/views/workflow/workflowstep4.js"),e.register(marriage,"marriage","E:/Project/long/src/views/workflow/workflowstep4.js"),e.register(relationship1,"relationship1","E:/Project/long/src/views/workflow/workflowstep4.js"),e.register(relationship2,"relationship2","E:/Project/long/src/views/workflow/workflowstep4.js"),e.register(WorkFlowStep4,"WorkFlowStep4","E:/Project/long/src/views/workflow/workflowstep4.js"),_(module))}()}.call(this,__webpack_require__(10)(module))},31:function(e,_){}}]);